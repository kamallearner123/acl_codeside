{% extends 'base.html' %}

{% block title %}Courses - Apt Computing Labs{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="h4 mb-3">Courses</h1>
  <div class="row g-3">
    {% for course in courses %}
      <div class="col-md-6 col-lg-4">
        <div class="card h-100">
          {% if course.image %}
            <img src="{{ course.image }}" class="course-thumb" alt="{{ course.title }}">
          {% endif %}
          <div class="card-body">
            <h5>{{ course.title }}</h5>
            <p class="mb-1"><small class="text-muted">{{ course.duration_hours }} hours</small></p>
            <p>{{ course.description|truncatewords:30 }}</p>
            {% if course.events.all %}
              <div class="mt-2">
                <strong>Upcoming:</strong>
                <ul class="mb-0">
                  {% for e in course.events.all|slice:":3" %}
                    <li>{{ e.title }} â€” {{ e.date }} {% if e.youtube_link %}- <a href="{{ e.youtube_link }}" target="_blank">Watch</a>{% endif %}</li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-info">No courses found. Add courses in the admin.</div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
